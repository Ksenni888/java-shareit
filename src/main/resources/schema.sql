CREATE TABLE IF NOT EXISTS users (
user_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
user_name VARCHAR(255) NOT NULL,
email VARCHAR(512) NOT NULL,

CONSTRAINT UQ_USER_EMAIL UNIQUE (email)
);

CREATE TABLE IF NOT EXISTS requests (
request_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
description VARCHAR(512),
requester_id BIGINT REFERENCES users (user_id) ON DELETE CASCADE,
created TIMESTAMP WITHOUT TIME ZONE
);

CREATE TABLE IF NOT EXISTS items (
item_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
item_name VARCHAR(255) NOT NULL,
description VARCHAR(512),
is_available boolean,
owner_id BIGINT REFERENCES users (user_id) ON DELETE CASCADE,
request_id REFERENCES requests (request_id)

);

CREATE TABLE IF NOT EXISTS bookings (
booking_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
start_date TIMESTAMP WITHOUT TIME ZONE,
end_date TIMESTAMP WITHOUT TIME ZONE,
item_id BIGINT REFERENCES items (item_id) ON DELETE CASCADE,
booker_id BIGINT REFERENCES users (user_id) ON DELETE CASCADE,
status varchar(25) NOT NULL --ENUM ('WAITING', 'APPROVED', 'REJECTED', 'CANCELED'),

);

CREATE TABLE IF NOT EXISTS comments (
comment_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
text varchar(1000) NOT NULL,
created timestamp(9) without time zone DEFAULT CURRENT_TIMESTAMP,
item_id BIGINT REFERENCES items (item_id) ON DELETE CASCADE,
author_id BIGINT REFERENCES users (user_id) ON DELETE CASCADE
);



